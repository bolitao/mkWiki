{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs \u00b6 For full documentation visit mkdocs.org . Commands \u00b6 mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout \u00b6 mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files. TODO \u00b6 zh-CN search","title":"Welcome to MkDocs"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"#todo","text":"zh-CN search","title":"TODO"},{"location":"about/","text":"About \u00b6 Welcome to boli's wiki.","title":"About"},{"location":"about/#about","text":"Welcome to boli's wiki.","title":"About"},{"location":"Dev/Docker/Windows%20Docker%20%E4%BB%A3%E7%90%86%E8%AE%BE%E7%BD%AE/","text":"\u5728\u4f7f\u7528 Docker for Windows \u65f6\uff0c\u8bbe\u7f6e\u672c\u5730\u4ee3\u7406\uff08127.0.0.1:10809\uff09\u65e0\u6cd5\u62c9\u53d6\u955c\u50cf\uff1a Unable to find image 'docker/getting-started:latest' locally docker: Error response from daemon: Get https://registry-1.docker.io/v2/: proxyconnect tcp: dial tcp 127 .0.0.1:10809: connect: connection refused. See 'docker run --help' . \u539f\u56e0\u662f\u6211\u4f7f\u7528\u7684 Docker \u540e\u7aef\u57fa\u4e8e WSL 2\uff0c\u5176\u4ee3\u7406\u4e0d\u80fd\u8bbe\u7f6e\u4e3a 127.0.0.1 \u6216\u662f localhost \uff0c\u800c\u5e94\u8be5\u8bbe\u7f6e\u4e3a Windows \u7684 WSL \u7f51\u5361\u5730\u5740\uff0c\u6bd4\u5982\uff1a \u276f ipconfig # output: \u4ee5\u592a\u7f51\u9002\u914d\u5668 vEthernet ( WSL ) : \u8fde\u63a5\u7279\u5b9a\u7684 DNS \u540e\u7f00 . . . . . . . : \u672c\u5730\u94fe\u63a5 IPv6 \u5730\u5740 . . . . . . . . : fe80 :: a99e : b411 : 2b0c : 1ad6 % 47 IPv4 \u5730\u5740 . . . . . . . . . . . . : 172 . 30 . 112 . 1 \u5b50\u7f51\u63a9\u7801 . . . . . . . . . . . . : 255 . 255 . 240 . 0 \u9ed8\u8ba4\u7f51\u5173 . . . . . . . . . . . . . : \u5c06\u4ee3\u7406\u8bbe\u7f6e\u4e3a 172.30.112.1:10809 \u5c31\u597d\u4e86\u3002 docker pull mysql Using default tag: latest latest: Pulling from library/mysql 6ec7b7d162b2: Pull complete fedd960d3481: Pull complete 7ab947313861: Pull complete 64f92f19e638: Pull complete 3e80b17bff96: Pull complete 014e976799f9: Pull complete 59ae84fee1b3: Pull complete ffe10de703ea: Pull complete 657af6d90c83: Pull complete 98bfb480322c: Pull complete 9f2c4202ac29: Pull complete a369b92bfc99: Pull complete Digest: sha256:365e891b22abd3336d65baefc475b4a9a1e29a01a7b6b5be04367fcc9f373bb7 Status: Downloaded newer image for mysql:latest docker.io/library/mysql:latest","title":"Windows Docker \u4ee3\u7406\u8bbe\u7f6e"},{"location":"Dev/Docker/compose%20conf/mongo/","text":"version: '3.1' services: mongo: image: mongo:latest restart: always environment: MONGO_INITDB_ROOT_USERNAME: bolitao MONGO_INITDB_ROOT_PASSWORD: bolitao volumes: - /data/mongo/db:/data/db # data path - /data/mongo/log:/var/log/mongodb # log path ports: - 27017:27017 mongo-express: image: mongo-express restart: always ports: - 8081:8081 environment: ME_CONFIG_MONGODB_ADMINUSERNAME: bolitao ME_CONFIG_MONGODB_ADMINPASSWORD: bolitao REF: mongo - Docker Hub docker-compose\u6784\u5efamongodb\u5bb9\u5668\u5b9e\u4f8b_feinifi\u7684\u535a\u5ba2-CSDN\u535a\u5ba2","title":"Mongo"},{"location":"Dev/Docker/compose%20conf/mysql/","text":"version: '3.1' services: db: image: mysql:latest command: --default-authentication-plugin=mysql_native_password restart: always environment: MYSQL_ROOT_PASSWORD: bolitao MYSQL_USER: 'bolitao' MYSQL_PASSWORD: 'bolitao' volumes: - /data/mysql/db:/var/lib/mysql ports: - 3306:3306 expose: - 3306 adminer: image: adminer restart: always ports: - 8089:8080 grant: GRANT ALL PRIVILEGES ON * . * TO 'bolitao' @ '%' WITH GRANT OPTION ; TODO: \u4e3b\u4ece","title":"Mysql"},{"location":"Dev/Docker/compose%20conf/nginx/","text":"deploy proxy ssl https://codewithhugo.com/setting-up-express-and-redis-with-docker-compose/","title":"Nginx"},{"location":"Dev/Docker/compose%20conf/postgres/","text":"version: '3.1' services: db: image: postgres:latest restart: always environment: POSTGRES_USER: bolitao POSTGRES_PASSWORD: bolitao volumes: - /data/postgres/db:/var/lib/postgresql/data/ ports: - 5432:5432","title":"Postgres"},{"location":"Dev/Docker/compose%20conf/rabbitmq/","text":"conf \u00b6 services: rabbitmq: image: rabbitmq:latest volumes: - /data/rabbitmq/etc/:/etc/rabbitmq/ - /data/rabbitmq/data/:/var/lib/rabbitmq/ - /data/rabbitmq/logs/:/var/log/rabbitmq/ environment: RABBITMQ_ERLANG_COOKIE: \"SWQOKODSQALRPCLNMEQG\" RABBITMQ_DEFAULT_USER: \"rabbitmq\" RABBITMQ_DEFAULT_PASS: \"rabbitmq\" RABBITMQ_DEFAULT_VHOST: \"/\" ports: - 5672:5672 - 15672:15672 restart: always \u65e0\u6cd5\u542f\u52a8 \u00b6 touch: cannot touch '/etc/rabbitmq/rabbitmq.conf' : Permission denied \u4e0d\u4f7f\u7528 volume \u6302\u8f7d\u5219\u65e0\u6b64\u95ee\u9898\u3002 chown -R 999 :999 /data/rabbitmq \u964d\u4f4e\u6743\u9650\uff0c\u5728\u6211\u7684\u673a\u5668\u4e0a\uff0c 999:999 \u7684\u5b9e\u8d28\u610f\u4e49\u4e3a openmediavault-webgui:openmediavault-config \u3002 enable plugin \u00b6 docker exec -it rabbitmq_rabbitmq_1 bash rabbitmq-plugins enable rabbitmq_management","title":"Rabbitmq"},{"location":"Dev/Docker/compose%20conf/rabbitmq/#conf","text":"services: rabbitmq: image: rabbitmq:latest volumes: - /data/rabbitmq/etc/:/etc/rabbitmq/ - /data/rabbitmq/data/:/var/lib/rabbitmq/ - /data/rabbitmq/logs/:/var/log/rabbitmq/ environment: RABBITMQ_ERLANG_COOKIE: \"SWQOKODSQALRPCLNMEQG\" RABBITMQ_DEFAULT_USER: \"rabbitmq\" RABBITMQ_DEFAULT_PASS: \"rabbitmq\" RABBITMQ_DEFAULT_VHOST: \"/\" ports: - 5672:5672 - 15672:15672 restart: always","title":"conf"},{"location":"Dev/Docker/compose%20conf/rabbitmq/#_1","text":"touch: cannot touch '/etc/rabbitmq/rabbitmq.conf' : Permission denied \u4e0d\u4f7f\u7528 volume \u6302\u8f7d\u5219\u65e0\u6b64\u95ee\u9898\u3002 chown -R 999 :999 /data/rabbitmq \u964d\u4f4e\u6743\u9650\uff0c\u5728\u6211\u7684\u673a\u5668\u4e0a\uff0c 999:999 \u7684\u5b9e\u8d28\u610f\u4e49\u4e3a openmediavault-webgui:openmediavault-config \u3002","title":"\u65e0\u6cd5\u542f\u52a8"},{"location":"Dev/Docker/compose%20conf/rabbitmq/#enable-plugin","text":"docker exec -it rabbitmq_rabbitmq_1 bash rabbitmq-plugins enable rabbitmq_management","title":"enable plugin"},{"location":"Dev/Docker/compose%20conf/redis/","text":"version: '3' services: redis: image: redis container_name: docker_redis volumes: - /data/redis/redisconf/redis.conf:/usr/local/etc/redis/redis.conf - /data/redis/datadir:/data/ - /data/redis/logs:/logs/ command: - /usr/local/etc/redis/redis.conf ports: - 6379:6379 restart: always redis conf \u00b6 nano /data/redis/redisconf/redis.conf conteng: requirepass bolitao save 900 1 save 300 10 save 60 1000 appendonly yes appendfsync everysec auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb TODO: \u4e3b\u4ece \u96c6\u7fa4 REF 1. \u4f7f\u7528docker-compose\u914d\u7f6eredis\u670d\u52a1 - \u843d\u53f6&\u4e0d\u968f\u98ce - \u535a\u5ba2\u56ed","title":"Redis"},{"location":"Dev/Docker/compose%20conf/redis/#redis-conf","text":"nano /data/redis/redisconf/redis.conf conteng: requirepass bolitao save 900 1 save 300 10 save 60 1000 appendonly yes appendfsync everysec auto-aof-rewrite-percentage 100 auto-aof-rewrite-min-size 64mb TODO: \u4e3b\u4ece \u96c6\u7fa4 REF 1. \u4f7f\u7528docker-compose\u914d\u7f6eredis\u670d\u52a1 - \u843d\u53f6&\u4e0d\u968f\u98ce - \u535a\u5ba2\u56ed","title":"redis conf"},{"location":"Dev/FrontEnd/Nuxt%2C%20Vuetify%20Start/","text":"Nuxt, Vuetify Start \u00b6 create \u00b6 npm init nuxt-app vuetify_learning # output: create-nuxt-app v3.4.0 \u2728 Generating Nuxt.js project in vuetify_learning ? Project name: vuetify_learning ? Programming language: JavaScript ? Package manager: Npm ? UI framework: Vuetify.js ? Nuxt.js modules: Axios ? Linting tools: ESLint, Prettier ? Testing framework: None ? Rendering mode: Universal ( SSR / SSG ) ? Deployment target: Server ( Node.js hosting ) ? Development tools: jsconfig.json ( Recommended for VS Code if you ' re not using typescript ) ? Continuous integration: None ? Version control system: Git \ud83c\udf89 Successfully created project vuetify_learning cd vuetify_learning To build & start for production: cd vuetify_learning npm run build npm run start","title":"Nuxt, Vuetify Start"},{"location":"Dev/FrontEnd/Nuxt%2C%20Vuetify%20Start/#nuxt-vuetify-start","text":"","title":"Nuxt, Vuetify Start"},{"location":"Dev/FrontEnd/Nuxt%2C%20Vuetify%20Start/#create","text":"npm init nuxt-app vuetify_learning # output: create-nuxt-app v3.4.0 \u2728 Generating Nuxt.js project in vuetify_learning ? Project name: vuetify_learning ? Programming language: JavaScript ? Package manager: Npm ? UI framework: Vuetify.js ? Nuxt.js modules: Axios ? Linting tools: ESLint, Prettier ? Testing framework: None ? Rendering mode: Universal ( SSR / SSG ) ? Deployment target: Server ( Node.js hosting ) ? Development tools: jsconfig.json ( Recommended for VS Code if you ' re not using typescript ) ? Continuous integration: None ? Version control system: Git \ud83c\udf89 Successfully created project vuetify_learning cd vuetify_learning To build & start for production: cd vuetify_learning npm run build npm run start","title":"create"},{"location":"Dev/FrontEnd/npn%20%E5%92%8C%20yarn%20%E7%9A%84%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/","text":"npn \u548c yarn \u7684\u7f51\u7edc\u95ee\u9898 \u00b6 .npmrc : proxy=http://127.0.0.1:10809 sass_binary_site=https://npm.taobao.org/mirrors/node-sass/ registry=https://registry.npm.taobao.org phantomjs_cdnurl=http://cnpmjs.org/downloads electron_mirror=https://npm.taobao.org/mirrors/electron/ sqlite3_binary_host_mirror=https://foxgis.oss-cn-shanghai.aliyuncs.com/ profiler_binary_host_mirror=https://npm.taobao.org/mirrors/node-inspector/ chromedriver_cdnurl=https://cdn.npm.taobao.org/dist/chromedriver .yarnrc : registry \"https://registry.npm.taobao.org\" sass_binary_site \"https://npm.taobao.org/mirrors/node-sass/\" phantomjs_cdnurl \"http://cnpmjs.org/downloads\" electron_mirror \"https://npm.taobao.org/mirrors/electron/\" sqlite3_binary_host_mirror \"https://foxgis.oss-cn-shanghai.aliyuncs.com/\" profiler_binary_host_mirror \"https://npm.taobao.org/mirrors/node-inspector/\" chromedriver_cdnurl \"https://cdn.npm.taobao.org/dist/chromedriver\"","title":"npn \u548c yarn \u7684\u7f51\u7edc\u95ee\u9898"},{"location":"Dev/FrontEnd/npn%20%E5%92%8C%20yarn%20%E7%9A%84%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/#npn-yarn","text":".npmrc : proxy=http://127.0.0.1:10809 sass_binary_site=https://npm.taobao.org/mirrors/node-sass/ registry=https://registry.npm.taobao.org phantomjs_cdnurl=http://cnpmjs.org/downloads electron_mirror=https://npm.taobao.org/mirrors/electron/ sqlite3_binary_host_mirror=https://foxgis.oss-cn-shanghai.aliyuncs.com/ profiler_binary_host_mirror=https://npm.taobao.org/mirrors/node-inspector/ chromedriver_cdnurl=https://cdn.npm.taobao.org/dist/chromedriver .yarnrc : registry \"https://registry.npm.taobao.org\" sass_binary_site \"https://npm.taobao.org/mirrors/node-sass/\" phantomjs_cdnurl \"http://cnpmjs.org/downloads\" electron_mirror \"https://npm.taobao.org/mirrors/electron/\" sqlite3_binary_host_mirror \"https://foxgis.oss-cn-shanghai.aliyuncs.com/\" profiler_binary_host_mirror \"https://npm.taobao.org/mirrors/node-inspector/\" chromedriver_cdnurl \"https://cdn.npm.taobao.org/dist/chromedriver\"","title":"npn \u548c yarn \u7684\u7f51\u7edc\u95ee\u9898"},{"location":"Dev/Java/JavaTestArticle/","text":"Test Article \u00b6 This is a test article.","title":"Test Article"},{"location":"Dev/Java/JavaTestArticle/#test-article","text":"This is a test article.","title":"Test Article"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/","text":"TSF \u5f02\u5e38\u3001\u4e8b\u52a1\u95ee\u9898\u590d\u73b0 \u590d\u73b0 \u989d\u5916\u5f15\u5165\u7684\u4f9d\u8d56 \u4fee\u6539 sqlSessionFactory \u7684 bean \u4e3a mybatis plus \u63d0\u4f9b \u5bfc\u5165 nes \u51fa\u95ee\u9898\u7684\u4ee3\u7801\uff08test \u5305\uff09 \u671f\u671b\u7684\u6b63\u5e38\u60c5\u51b5 TSF \u5f02\u5e38\u3001\u4e8b\u52a1\u95ee\u9898\u590d\u73b0 \u00b6 \u8868\u73b0\u4e3a\uff1a \u4e0d\u629b\u5f02\u5e38\uff0c\u4ee3\u7801\u80fd\u591f\u63a5\u7740\u8d70\u4e0b\u53bb \u4e8b\u52a1\u63a7\u5236\u4e0d\u751f\u6548 \u590d\u73b0 \u00b6 \u989d\u5916\u5f15\u5165\u7684\u4f9d\u8d56 \u00b6 <dependency> <groupId> com.baomidou </groupId> <artifactId> mybatis-plus-boot-starter </artifactId> <version> ${mybatis-plus-boot-starter.version} </version> </dependency> <dependency> <groupId> cn.hsa.powersi </groupId> <artifactId> hsa-powersi-base </artifactId> <version> ${hsa-powersi-base.version} </version> </dependency> \u4fee\u6539 sqlSessionFactory \u7684 bean \u4e3a mybatis plus \u63d0\u4f9b \u00b6 \u4fee\u6539 biz \u5305\u4e0b\u7684 db.xml \u6587\u4ef6\uff1a \u539f\u59cb\u7684\uff1a <bean id= \"sqlSessionFactory\" class= \"org.mybatis.spring.SqlSessionFactoryBean\" > \u4fee\u6539\u540e\uff1a <bean id= \"sqlSessionFactory\" class= \"com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean\" > ... <bean class= \"cn.hsa.powersi.mybatisplus.plugins.BatchUpdateInterceptor\" > <description> SQL\u6279\u91cf\u66f4\u65b0\u62e6\u622a\u5668 </description> </bean> <bean id= \"hsafGlobalConfig\" class= \"com.baomidou.mybatisplus.core.config.GlobalConfig\" > <description> SQL\u5168\u5c40\u914d\u7f6e </description> <property name= \"dbConfig\" ref= \"hsafDbConfig\" /> <property name= \"sqlInjector\" ref= \"hsafLogicSqlInjector\" /> </bean> <bean id= \"hsafDbConfig\" class= \"com.baomidou.mybatisplus.core.config.GlobalConfig.DbConfig\" > <description> SQL\u5168\u5c40\u6570\u636e\u5e93\u914d\u7f6e </description> <property name= \"idType\" value= \"ASSIGN_UUID\" /> <property name= \"logicDeleteValue\" value= \"0\" /> <property name= \"logicNotDeleteValue\" value= \"1\" /> </bean> <bean id= \"hsafLogicSqlInjector\" class= \"cn.hsa.powersi.mybatisplus.injector.LogicSqlInjector\" > <description> SQL\u6ce8\u5165\u5668 </description> </bean> \u5bfc\u5165 nes \u51fa\u95ee\u9898\u7684\u4ee3\u7801\uff08test \u5305\uff09 \u00b6 swagger \u8c03\u7528 cn/hsa/mbs/nes/test \u63a5\u53e3\uff0cjson \u5982\u4e0b\uff1a [ { \"id\" : 1 , \"status\" : 1 , \"username\" : \"string\" }, { \"id\" : 2 , \"status\" : 0 , \"username\" : \"AAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBlksakjwqhekjahdskjwqsadBBBBBBBBBBCCCCCCCCC\" }, { \"id\" : 3 , \"status\" : 0 , \"username\" : \"string\" } ] \u672a\u629b\u51fa\u5f02\u5e38\uff1a \u63a7\u5236\u53f0\u65e0\u5f02\u5e38\u4fe1\u606f\uff0cbo \u5c42\u540e\u7eed\u4ee3\u7801\u88ab\u6267\u884c\uff08\u7ea2\u6846\u6807\u8bb0\uff09\uff1a \u6570\u636e\u88ab\u63d2\u5165\u4e86\uff08\u672a\u88ab\u4e8b\u52a1\u63a7\u5236\uff09\uff1a \u671f\u671b\u7684\u6b63\u5e38\u60c5\u51b5 \u00b6 \u4ee5\u5f00\u6e90\u73af\u5883\u4e3a\u4f8b\uff0c\u671f\u671b TSF \u80fd\u548c\u5f00\u6e90\u73af\u5883\u8fd0\u884c\u6548\u679c\u4e00\u81f4\u3002 \u80fd\u591f\u8fd4\u56de\u5f02\u5e38\uff1a \u80fd\u591f\u8f93\u51fa\u5f02\u5e38\u4fe1\u606f\uff1a \u4e8b\u52a1\u80fd\u591f\u56de\u6eda\uff08\u672a\u63d2\u5165\u65b0\u6570\u636e\uff09\uff1a","title":"TSF \u5f02\u5e38\u3001\u4e8b\u52a1\u95ee\u9898\u590d\u73b0"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#tsf","text":"\u8868\u73b0\u4e3a\uff1a \u4e0d\u629b\u5f02\u5e38\uff0c\u4ee3\u7801\u80fd\u591f\u63a5\u7740\u8d70\u4e0b\u53bb \u4e8b\u52a1\u63a7\u5236\u4e0d\u751f\u6548","title":"TSF \u5f02\u5e38\u3001\u4e8b\u52a1\u95ee\u9898\u590d\u73b0"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#_1","text":"","title":"\u590d\u73b0"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#_2","text":"<dependency> <groupId> com.baomidou </groupId> <artifactId> mybatis-plus-boot-starter </artifactId> <version> ${mybatis-plus-boot-starter.version} </version> </dependency> <dependency> <groupId> cn.hsa.powersi </groupId> <artifactId> hsa-powersi-base </artifactId> <version> ${hsa-powersi-base.version} </version> </dependency>","title":"\u989d\u5916\u5f15\u5165\u7684\u4f9d\u8d56"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#sqlsessionfactory-bean-mybatis-plus","text":"\u4fee\u6539 biz \u5305\u4e0b\u7684 db.xml \u6587\u4ef6\uff1a \u539f\u59cb\u7684\uff1a <bean id= \"sqlSessionFactory\" class= \"org.mybatis.spring.SqlSessionFactoryBean\" > \u4fee\u6539\u540e\uff1a <bean id= \"sqlSessionFactory\" class= \"com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean\" > ... <bean class= \"cn.hsa.powersi.mybatisplus.plugins.BatchUpdateInterceptor\" > <description> SQL\u6279\u91cf\u66f4\u65b0\u62e6\u622a\u5668 </description> </bean> <bean id= \"hsafGlobalConfig\" class= \"com.baomidou.mybatisplus.core.config.GlobalConfig\" > <description> SQL\u5168\u5c40\u914d\u7f6e </description> <property name= \"dbConfig\" ref= \"hsafDbConfig\" /> <property name= \"sqlInjector\" ref= \"hsafLogicSqlInjector\" /> </bean> <bean id= \"hsafDbConfig\" class= \"com.baomidou.mybatisplus.core.config.GlobalConfig.DbConfig\" > <description> SQL\u5168\u5c40\u6570\u636e\u5e93\u914d\u7f6e </description> <property name= \"idType\" value= \"ASSIGN_UUID\" /> <property name= \"logicDeleteValue\" value= \"0\" /> <property name= \"logicNotDeleteValue\" value= \"1\" /> </bean> <bean id= \"hsafLogicSqlInjector\" class= \"cn.hsa.powersi.mybatisplus.injector.LogicSqlInjector\" > <description> SQL\u6ce8\u5165\u5668 </description> </bean>","title":"\u4fee\u6539 sqlSessionFactory \u7684 bean \u4e3a mybatis plus \u63d0\u4f9b"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#nes-test","text":"swagger \u8c03\u7528 cn/hsa/mbs/nes/test \u63a5\u53e3\uff0cjson \u5982\u4e0b\uff1a [ { \"id\" : 1 , \"status\" : 1 , \"username\" : \"string\" }, { \"id\" : 2 , \"status\" : 0 , \"username\" : \"AAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBlksakjwqhekjahdskjwqsadBBBBBBBBBBCCCCCCCCC\" }, { \"id\" : 3 , \"status\" : 0 , \"username\" : \"string\" } ] \u672a\u629b\u51fa\u5f02\u5e38\uff1a \u63a7\u5236\u53f0\u65e0\u5f02\u5e38\u4fe1\u606f\uff0cbo \u5c42\u540e\u7eed\u4ee3\u7801\u88ab\u6267\u884c\uff08\u7ea2\u6846\u6807\u8bb0\uff09\uff1a \u6570\u636e\u88ab\u63d2\u5165\u4e86\uff08\u672a\u88ab\u4e8b\u52a1\u63a7\u5236\uff09\uff1a","title":"\u5bfc\u5165 nes \u51fa\u95ee\u9898\u7684\u4ee3\u7801\uff08test \u5305\uff09"},{"location":"Dev/Java/TSF%20%E5%BC%82%E5%B8%B8%E3%80%81%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E5%A4%8D%E7%8E%B0/#_3","text":"\u4ee5\u5f00\u6e90\u73af\u5883\u4e3a\u4f8b\uff0c\u671f\u671b TSF \u80fd\u548c\u5f00\u6e90\u73af\u5883\u8fd0\u884c\u6548\u679c\u4e00\u81f4\u3002 \u80fd\u591f\u8fd4\u56de\u5f02\u5e38\uff1a \u80fd\u591f\u8f93\u51fa\u5f02\u5e38\u4fe1\u606f\uff1a \u4e8b\u52a1\u80fd\u591f\u56de\u6eda\uff08\u672a\u63d2\u5165\u65b0\u6570\u636e\uff09\uff1a","title":"\u671f\u671b\u7684\u6b63\u5e38\u60c5\u51b5"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/","text":"Mybatis Plus \u6267\u884c SQL \u6253\u5370 \u00b6 \u4f9d\u8d56 \u00b6 <!-- p6spy --> <dependency> <groupId> p6spy </groupId> <artifactId> p6spy </artifactId> <version> 3.9.1 </version> </dependency> \u914d\u7f6e \u00b6 spring: datasource: username: bolitao password: bolitao driver-class-name: com.p6spy.engine.spy.P6SpyDriver url: jdbc:p6spy:mysql://127.0.0.1:3306/boliblog?useUnicode=true&useSSL=false&characterEncoding=utf8&serverTimezone=Asia/Shanghai \u5176\u4ed6 \u00b6 src/main/resources/spy.properties : #3.2.1\u4ee5\u4e0a\u4f7f\u7528 modulelist = com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory # \u81ea\u5b9a\u4e49\u65e5\u5fd7\u6253\u5370 logMessageFormat = com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger #\u65e5\u5fd7\u8f93\u51fa\u5230\u63a7\u5236\u53f0 appender = com.baomidou.mybatisplus.extension.p6spy.StdoutLogger # \u4f7f\u7528\u65e5\u5fd7\u7cfb\u7edf\u8bb0\u5f55 sql #appender=com.p6spy.engine.spy.appender.Slf4JLogger # \u8bbe\u7f6e p6spy driver \u4ee3\u7406 deregisterdrivers = true # \u53d6\u6d88JDBC URL\u524d\u7f00 useprefix = true # \u914d\u7f6e\u8bb0\u5f55 Log \u4f8b\u5916,\u53ef\u53bb\u6389\u7684\u7ed3\u679c\u96c6\u6709error,info,batch,debug,statement,commit,rollback,result,resultset. excludecategories = info,debug,result,commit,resultset # \u65e5\u671f\u683c\u5f0f dateformat = yyyy-MM-dd HH:mm:ss # \u5b9e\u9645\u9a71\u52a8\u53ef\u591a\u4e2a #driverlist=org.h2.Driver # \u662f\u5426\u5f00\u542f\u6162SQL\u8bb0\u5f55 outagedetection = true # \u6162SQL\u8bb0\u5f55\u6807\u51c6 2 \u79d2 outagedetectioninterval = 2 \u76f8\u5173 \u00b6 mybatis plus sql log \u00b7 bolitao/boliblog@ca7acbb \u6267\u884c SQL \u5206\u6790\u6253\u5370 | MyBatis-Plus","title":"Mybatis Plus \u6267\u884c SQL \u6253\u5370"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/#mybatis-plus-sql","text":"","title":"Mybatis Plus \u6267\u884c SQL \u6253\u5370"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/#_1","text":"<!-- p6spy --> <dependency> <groupId> p6spy </groupId> <artifactId> p6spy </artifactId> <version> 3.9.1 </version> </dependency>","title":"\u4f9d\u8d56"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/#_2","text":"spring: datasource: username: bolitao password: bolitao driver-class-name: com.p6spy.engine.spy.P6SpyDriver url: jdbc:p6spy:mysql://127.0.0.1:3306/boliblog?useUnicode=true&useSSL=false&characterEncoding=utf8&serverTimezone=Asia/Shanghai","title":"\u914d\u7f6e"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/#_3","text":"src/main/resources/spy.properties : #3.2.1\u4ee5\u4e0a\u4f7f\u7528 modulelist = com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory # \u81ea\u5b9a\u4e49\u65e5\u5fd7\u6253\u5370 logMessageFormat = com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger #\u65e5\u5fd7\u8f93\u51fa\u5230\u63a7\u5236\u53f0 appender = com.baomidou.mybatisplus.extension.p6spy.StdoutLogger # \u4f7f\u7528\u65e5\u5fd7\u7cfb\u7edf\u8bb0\u5f55 sql #appender=com.p6spy.engine.spy.appender.Slf4JLogger # \u8bbe\u7f6e p6spy driver \u4ee3\u7406 deregisterdrivers = true # \u53d6\u6d88JDBC URL\u524d\u7f00 useprefix = true # \u914d\u7f6e\u8bb0\u5f55 Log \u4f8b\u5916,\u53ef\u53bb\u6389\u7684\u7ed3\u679c\u96c6\u6709error,info,batch,debug,statement,commit,rollback,result,resultset. excludecategories = info,debug,result,commit,resultset # \u65e5\u671f\u683c\u5f0f dateformat = yyyy-MM-dd HH:mm:ss # \u5b9e\u9645\u9a71\u52a8\u53ef\u591a\u4e2a #driverlist=org.h2.Driver # \u662f\u5426\u5f00\u542f\u6162SQL\u8bb0\u5f55 outagedetection = true # \u6162SQL\u8bb0\u5f55\u6807\u51c6 2 \u79d2 outagedetectioninterval = 2","title":"\u5176\u4ed6"},{"location":"Dev/Java/SQL/Mybatis%20Plus%20%E6%89%A7%E8%A1%8C%20SQL%20%E6%89%93%E5%8D%B0/#_4","text":"mybatis plus sql log \u00b7 bolitao/boliblog@ca7acbb \u6267\u884c SQL \u5206\u6790\u6253\u5370 | MyBatis-Plus","title":"\u76f8\u5173"},{"location":"Dev/Java/nacos/rec/","text":"@SpringBootApplication ( exclude = { DataSourceAutoConfiguration . class }) @NacosPropertySource ( dataId = \"tgumi\" , groupId = \"TGUMI\" , autoRefreshed = true ) // nacos","title":"Rec"},{"location":"Dev/Java/%E5%AE%89%E5%85%A8/%E8%B7%A8%E5%9F%9F/","text":"\u8de8\u57df\u95ee\u9898 \u00b6 Spring MVC \u00b6 @Configuration public class CorsConfig implements WebMvcConfigurer { @Override public void addCorsMappings ( CorsRegistry registry ) { registry . addMapping ( \"/**\" ) . allowedOriginPatterns ( \"*\" ) . allowedMethods ( \"GET\" , \"HEAD\" , \"POST\" , \"PUT\" , \"DELETE\" , \"OPTIONS\" ) . allowCredentials ( true ) . maxAge ( 3600 ) . allowedHeaders ( \"*\" ); } } Shiro \u00b6 @Override protected boolean preHandle ( ServletRequest request , ServletResponse response ) throws Exception { HttpServletRequest httpServletRequest = WebUtils . toHttp ( request ); HttpServletResponse httpServletResponse = WebUtils . toHttp ( response ); httpServletResponse . setHeader ( \"Access-control-Allow-Origin\" , httpServletRequest . getHeader ( \"Origin\" )); httpServletResponse . setHeader ( \"Access-Control-Allow-Methods\" , \"GET,POST,OPTIONS,PUT,DELETE\" ); httpServletResponse . setHeader ( \"Access-Control-Allow-Headers\" , httpServletRequest . getHeader ( \"Access-Control-Request-Headers\" )); // \u8de8\u57df\u65f6\u4f1a\u9996\u5148\u53d1\u9001\u4e00\u4e2aOPTIONS\u8bf7\u6c42\uff0c\u8fd9\u91cc\u6211\u4eec\u7ed9OPTIONS\u8bf7\u6c42\u76f4\u63a5\u8fd4\u56de\u6b63\u5e38\u72b6\u6001 if ( httpServletRequest . getMethod (). equals ( RequestMethod . OPTIONS . name ())) { httpServletResponse . setStatus ( org . springframework . http . HttpStatus . OK . value ()); return false ; } return super . preHandle ( request , response ); }","title":"\u8de8\u57df\u95ee\u9898"},{"location":"Dev/Java/%E5%AE%89%E5%85%A8/%E8%B7%A8%E5%9F%9F/#_1","text":"","title":"\u8de8\u57df\u95ee\u9898"},{"location":"Dev/Java/%E5%AE%89%E5%85%A8/%E8%B7%A8%E5%9F%9F/#spring-mvc","text":"@Configuration public class CorsConfig implements WebMvcConfigurer { @Override public void addCorsMappings ( CorsRegistry registry ) { registry . addMapping ( \"/**\" ) . allowedOriginPatterns ( \"*\" ) . allowedMethods ( \"GET\" , \"HEAD\" , \"POST\" , \"PUT\" , \"DELETE\" , \"OPTIONS\" ) . allowCredentials ( true ) . maxAge ( 3600 ) . allowedHeaders ( \"*\" ); } }","title":"Spring MVC"},{"location":"Dev/Java/%E5%AE%89%E5%85%A8/%E8%B7%A8%E5%9F%9F/#shiro","text":"@Override protected boolean preHandle ( ServletRequest request , ServletResponse response ) throws Exception { HttpServletRequest httpServletRequest = WebUtils . toHttp ( request ); HttpServletResponse httpServletResponse = WebUtils . toHttp ( response ); httpServletResponse . setHeader ( \"Access-control-Allow-Origin\" , httpServletRequest . getHeader ( \"Origin\" )); httpServletResponse . setHeader ( \"Access-Control-Allow-Methods\" , \"GET,POST,OPTIONS,PUT,DELETE\" ); httpServletResponse . setHeader ( \"Access-Control-Allow-Headers\" , httpServletRequest . getHeader ( \"Access-Control-Request-Headers\" )); // \u8de8\u57df\u65f6\u4f1a\u9996\u5148\u53d1\u9001\u4e00\u4e2aOPTIONS\u8bf7\u6c42\uff0c\u8fd9\u91cc\u6211\u4eec\u7ed9OPTIONS\u8bf7\u6c42\u76f4\u63a5\u8fd4\u56de\u6b63\u5e38\u72b6\u6001 if ( httpServletRequest . getMethod (). equals ( RequestMethod . OPTIONS . name ())) { httpServletResponse . setStatus ( org . springframework . http . HttpStatus . OK . value ()); return false ; } return super . preHandle ( request , response ); }","title":"Shiro"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/","text":"MySQL \u5347\u7ea7 \u00b6 \u867d\u7136\u6211\u975e\u5e38\u53cd\u5bf9\u624b\u52a8\u7f16\u8bd1\u6216\u4f7f\u7528 generic \u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5 Linux \u8f6f\u4ef6\u5305\uff0c\u4f46\u6211\u4eec\u516c\u53f8\u7684\u8fd0\u7ef4\u7ec4\u4f3c\u4e4e\u5341\u5206\u70ed\u8877\u4e8e\u6b64\uff0c\u597d\u5de7\u4e0d\u5de7\u6211\u5728\u8fd0\u7ef4\u7ec4\u5de5\u4f5c\u8fc7\u51e0\u5929\uff0c\u63a5\u624b\u4e86\u5347\u7ea7 MySQL \u7684\u6d3b\uff0c\u4e8e\u662f\u8bb0\u5f55\u4e00\u4e0b\u4f7f\u7528\u4e8c\u8fdb\u5236\u5305\u5347\u7ea7 MySQL \u7684\u64cd\u4f5c\u3002 1. MySQL \u5b89\u88c5\u5305\u51c6\u5907 \u00b6 \u8f6f\u4ef6\u538b\u7f29\u5305\u540d\uff1a mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz \u4ece FTP \u670d\u52a1\u5668\u4e0b\u8f7d\uff08\u6216\u968f\u4fbf\u5176\u4ed6\u65b9\u5f0f\u62ff\u5230\u4e8c\u8fdb\u5236\u5305\uff09\uff1a wget -P /mysql/ http://ip:port/path/to/ftp_dir/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz 2. \u6570\u636e\u5e93\u670d\u52a1\u5668\u786e\u8ba4 \u00b6 \u6d4b\u8bd5\u73af\u5883\u670d\u52a1\u5668\uff1a\u89c1 Excel \u8868\u683c \u751f\u4ea7\u73af\u5883\u670d\u52a1\u5668\uff1a\u89c1 Excel \u8868\u683c 3. \u6570\u636e\u5907\u4efd \u00b6 \u521b\u5efa\u5907\u4efd\u6587\u4ef6\u5939\uff1a mkdir /mysql/dbbackup \u5907\u4efd MySQL \u5e93\uff1a mysqldump -uroot -p 'mysql_password' --master-data = 2 -c db_name > /mysql/dbbackup/db_name_20200909.sql 4. \u5347\u7ea7\u524d\u51c6\u5907 \u00b6 \u5148\u5347\u7ea7\u4ece\uff0c\u518d\u5347\u7ea7\u4e3b\u3002 4.1 \u5173\u95ed keepalived \u00b6 service keepalived stop 4.2 \u5173\u95ed MySQL \u00b6 su - //\u5207\u6362\u5230\u8d85\u7ea7\u7528\u6237 service mysql stop 4.3 \u5907\u4efd binlog \u00b6 mkdir /mysql/log_20200909_bak && cp -pr /mysql/log/* /mysql/log_20200908_bak 5. \u6b63\u5f0f\u5347\u7ea7 \u00b6 \u89e3\u538b\u3001\u4fee\u6539\u76ee\u5f55\u540d\u3001\u8d4b\u6743\uff1a tar -xvf /mysql/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz -C /mysql/service/ && mv /mysql/service/mysql-5.7.31-linux-glibc2.12-x86_64/ /mysql/service/mysql-5.7.31/ && chown -R mysql.mysql /mysql/service/mysql-5.7.31 \u5220\u9664\u538b\u7f29\u6587\u4ef6 rm /mysql/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz 6. \u4fee\u6539 my.cnf \u914d\u7f6e\u6587\u4ef6 \u00b6 \u5907\u4efd\u65e7\u7684\u914d\u7f6e\u6587\u4ef6\u3001\u4fee\u6539\u65b0\u7684\u914d\u7f6e\uff1a cp /etc/my.cnf /etc/my_5.7.28.cnf && vi /etc/my.cnf \u4fee\u6539\u4ee5\u4e0b\u884c\uff1a basedir=/mysql/service/mysql-5.7.31 \u6267\u884c MySQL \u7684\u542f\u52a8\uff1a /mysql/service/mysql-5.7.31/bin/mysqld --defaults-file = /etc/my.cnf & \u68c0\u67e5\u662f\u5426\u542f\u52a8\uff1a ps -ef | grep mysqld | grep -v grep 7. \u8fd0\u884c mysql_upgrade \u5347\u7ea7\u6570\u636e\u5b57\u5178 \u00b6 \u5173\u95ed MySQL\uff1a /mysql/service/mysql-5.7.31/bin/mysql -uroot -p 'mysql_password' --execute = \"SET GLOBAL innodb_fast_shutdown=0\" && /mysql/service/mysql-5.7.31/bin/mysqladmin -uroot -p 'mysql_password' shutdown \u542f\u52a8\u65b0\u7248 MySQL\uff1a /mysql/service/mysql-5.7.31//bin/mysqld --defaults-file = /etc/my.cnf & \u68c0\u67e5\u517c\u5bb9\u6027\uff1a /mysql/service/mysql-5.7.31/bin/mysql_upgrade -uroot -p 'mysql_password' \u68c0\u67e5\u65e0\u8bef\u540e\u505c\u6b62 MySQL\uff1a /mysql/service/mysql-5.7.31/bin/mysqladmin -uroot -p 'mysql_password' shutdown 8. \u4fee\u6539\u542f\u52a8\u811a\u672c\u91cd\u542f MySQL \u00b6 \u5907\u4efd\u539f\u542f\u52a8\u811a\u672c\u3001\u590d\u5236\u65b0\u542f\u52a8\u811a\u672c\uff1a mv /etc/init.d/mysql /etc/init.d/mysql_20200908 && cp /mysql/service/mysql-5.7.31/support-files/mysql.server /etc/init.d/mysql \u4fee\u6539\u542f\u52a8\u811a\u672c\uff1a vi /etc/init.d/mysql # \u4fee\u6539\u5185\u5bb9\uff1a basedir = /mysql/service/mysql-5.7.31/ datadir = /mysql/data/ \u6dfb\u52a0\u5f00\u673a\u542f\u52a8\u3001\u542f\u52a8 MySQL\uff1a chkconfig --add mysql && chkconfig mysql on && service mysql restart 9. \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \u00b6 \u7f16\u8f91\uff1a vi /etc/profile \u4fee\u6539 PATH \uff1a /mysql/service/mysql-5.7.31/bin: $PATH \u5237\u65b0\u73af\u5883\u53d8\u91cf source /etc/profile 10. \u9a8c\u8bc1\u5347\u7ea7 \u00b6 mysql -V 11. \u6062\u590d keepalived \u00b6 su - //\u5207\u6362\u5230\u8d85\u7ea7\u7528\u6237 service keepalived restart 12. \u4e3b\u4ece\u8fde\u63a5\u68c0\u67e5 \u00b6 \u68c0\u67e5 MySQL \u4e3b\u4ece\u72b6\u6001\uff1a show slave status \\ G \u037e \u68c0\u67e5 keepalived \u72b6\u6001\uff1a cat /app/log/keepalived/status","title":"MySQL \u5347\u7ea7"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#mysql","text":"\u867d\u7136\u6211\u975e\u5e38\u53cd\u5bf9\u624b\u52a8\u7f16\u8bd1\u6216\u4f7f\u7528 generic \u4e8c\u8fdb\u5236\u6587\u4ef6\u5b89\u88c5 Linux \u8f6f\u4ef6\u5305\uff0c\u4f46\u6211\u4eec\u516c\u53f8\u7684\u8fd0\u7ef4\u7ec4\u4f3c\u4e4e\u5341\u5206\u70ed\u8877\u4e8e\u6b64\uff0c\u597d\u5de7\u4e0d\u5de7\u6211\u5728\u8fd0\u7ef4\u7ec4\u5de5\u4f5c\u8fc7\u51e0\u5929\uff0c\u63a5\u624b\u4e86\u5347\u7ea7 MySQL \u7684\u6d3b\uff0c\u4e8e\u662f\u8bb0\u5f55\u4e00\u4e0b\u4f7f\u7528\u4e8c\u8fdb\u5236\u5305\u5347\u7ea7 MySQL \u7684\u64cd\u4f5c\u3002","title":"MySQL \u5347\u7ea7"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#1-mysql","text":"\u8f6f\u4ef6\u538b\u7f29\u5305\u540d\uff1a mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz \u4ece FTP \u670d\u52a1\u5668\u4e0b\u8f7d\uff08\u6216\u968f\u4fbf\u5176\u4ed6\u65b9\u5f0f\u62ff\u5230\u4e8c\u8fdb\u5236\u5305\uff09\uff1a wget -P /mysql/ http://ip:port/path/to/ftp_dir/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz","title":"1. MySQL \u5b89\u88c5\u5305\u51c6\u5907"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#2","text":"\u6d4b\u8bd5\u73af\u5883\u670d\u52a1\u5668\uff1a\u89c1 Excel \u8868\u683c \u751f\u4ea7\u73af\u5883\u670d\u52a1\u5668\uff1a\u89c1 Excel \u8868\u683c","title":"2. \u6570\u636e\u5e93\u670d\u52a1\u5668\u786e\u8ba4"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#3","text":"\u521b\u5efa\u5907\u4efd\u6587\u4ef6\u5939\uff1a mkdir /mysql/dbbackup \u5907\u4efd MySQL \u5e93\uff1a mysqldump -uroot -p 'mysql_password' --master-data = 2 -c db_name > /mysql/dbbackup/db_name_20200909.sql","title":"3. \u6570\u636e\u5907\u4efd"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#4","text":"\u5148\u5347\u7ea7\u4ece\uff0c\u518d\u5347\u7ea7\u4e3b\u3002","title":"4. \u5347\u7ea7\u524d\u51c6\u5907"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#41-keepalived","text":"service keepalived stop","title":"4.1 \u5173\u95ed keepalived"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#42-mysql","text":"su - //\u5207\u6362\u5230\u8d85\u7ea7\u7528\u6237 service mysql stop","title":"4.2 \u5173\u95ed MySQL"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#43-binlog","text":"mkdir /mysql/log_20200909_bak && cp -pr /mysql/log/* /mysql/log_20200908_bak","title":"4.3 \u5907\u4efd binlog"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#5","text":"\u89e3\u538b\u3001\u4fee\u6539\u76ee\u5f55\u540d\u3001\u8d4b\u6743\uff1a tar -xvf /mysql/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz -C /mysql/service/ && mv /mysql/service/mysql-5.7.31-linux-glibc2.12-x86_64/ /mysql/service/mysql-5.7.31/ && chown -R mysql.mysql /mysql/service/mysql-5.7.31 \u5220\u9664\u538b\u7f29\u6587\u4ef6 rm /mysql/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz","title":"5. \u6b63\u5f0f\u5347\u7ea7"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#6-mycnf","text":"\u5907\u4efd\u65e7\u7684\u914d\u7f6e\u6587\u4ef6\u3001\u4fee\u6539\u65b0\u7684\u914d\u7f6e\uff1a cp /etc/my.cnf /etc/my_5.7.28.cnf && vi /etc/my.cnf \u4fee\u6539\u4ee5\u4e0b\u884c\uff1a basedir=/mysql/service/mysql-5.7.31 \u6267\u884c MySQL \u7684\u542f\u52a8\uff1a /mysql/service/mysql-5.7.31/bin/mysqld --defaults-file = /etc/my.cnf & \u68c0\u67e5\u662f\u5426\u542f\u52a8\uff1a ps -ef | grep mysqld | grep -v grep","title":"6. \u4fee\u6539 my.cnf \u914d\u7f6e\u6587\u4ef6"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#7-mysql_upgrade","text":"\u5173\u95ed MySQL\uff1a /mysql/service/mysql-5.7.31/bin/mysql -uroot -p 'mysql_password' --execute = \"SET GLOBAL innodb_fast_shutdown=0\" && /mysql/service/mysql-5.7.31/bin/mysqladmin -uroot -p 'mysql_password' shutdown \u542f\u52a8\u65b0\u7248 MySQL\uff1a /mysql/service/mysql-5.7.31//bin/mysqld --defaults-file = /etc/my.cnf & \u68c0\u67e5\u517c\u5bb9\u6027\uff1a /mysql/service/mysql-5.7.31/bin/mysql_upgrade -uroot -p 'mysql_password' \u68c0\u67e5\u65e0\u8bef\u540e\u505c\u6b62 MySQL\uff1a /mysql/service/mysql-5.7.31/bin/mysqladmin -uroot -p 'mysql_password' shutdown","title":"7. \u8fd0\u884c mysql_upgrade \u5347\u7ea7\u6570\u636e\u5b57\u5178"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#8-mysql","text":"\u5907\u4efd\u539f\u542f\u52a8\u811a\u672c\u3001\u590d\u5236\u65b0\u542f\u52a8\u811a\u672c\uff1a mv /etc/init.d/mysql /etc/init.d/mysql_20200908 && cp /mysql/service/mysql-5.7.31/support-files/mysql.server /etc/init.d/mysql \u4fee\u6539\u542f\u52a8\u811a\u672c\uff1a vi /etc/init.d/mysql # \u4fee\u6539\u5185\u5bb9\uff1a basedir = /mysql/service/mysql-5.7.31/ datadir = /mysql/data/ \u6dfb\u52a0\u5f00\u673a\u542f\u52a8\u3001\u542f\u52a8 MySQL\uff1a chkconfig --add mysql && chkconfig mysql on && service mysql restart","title":"8. \u4fee\u6539\u542f\u52a8\u811a\u672c\u91cd\u542f MySQL"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#9","text":"\u7f16\u8f91\uff1a vi /etc/profile \u4fee\u6539 PATH \uff1a /mysql/service/mysql-5.7.31/bin: $PATH \u5237\u65b0\u73af\u5883\u53d8\u91cf source /etc/profile","title":"9. \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#10","text":"mysql -V","title":"10. \u9a8c\u8bc1\u5347\u7ea7"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#11-keepalived","text":"su - //\u5207\u6362\u5230\u8d85\u7ea7\u7528\u6237 service keepalived restart","title":"11. \u6062\u590d keepalived"},{"location":"Dev/MySQL/%E5%8D%87%E7%BA%A7/#12","text":"\u68c0\u67e5 MySQL \u4e3b\u4ece\u72b6\u6001\uff1a show slave status \\ G \u037e \u68c0\u67e5 keepalived \u72b6\u6001\uff1a cat /app/log/keepalived/status","title":"12. \u4e3b\u4ece\u8fde\u63a5\u68c0\u67e5"},{"location":"Dev/MySQL/%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%8E%92%E6%9F%A5/","text":"\u6162\u67e5\u8be2\u6392\u67e5 \u00b6 select id , db , user , host , command , time , state , info FROM information_schema . processlist WHERE command != \"Sleep\" order by time desc ; /mysql/service/mysql-5.7.28/bin/mysql -u root -p 'root$123' -e 'select id, db, user, host, command, time, state, info FROM information_schema.processlist WHERE command!=\"Sleep\" order by time desc\\G' > /tmp/20200923-SlowQuery.txt select concat ( 'kill ' , id , ';' ) from information_schema . processlist where command != 'Sleep' and time > 10 * 60 and user = 'gzsz' order by time desc ; 1\u3001\u67e5\u8be2\u662f\u5426\u9501\u8868 show OPEN TABLES where In_use > 0; 2\u3001\u67e5\u8be2\u8fdb\u7a0b show processlist \u67e5\u8be2\u5230\u76f8\u5bf9\u5e94\u7684\u8fdb\u7a0b===\u7136\u540e kill id \u8865\u5145\uff1a \u67e5\u770b\u6b63\u5728\u9501\u7684\u4e8b\u52a1 SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS; \u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1 SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS; SELECT * from information_schema.INNODB_TRX kill trx_mysql_thread_id \u53ef\u76f4\u63a5\u5728mysql\u547d\u4ee4\u884c\u6267\u884c\uff1ashow engine innodb status\\G;\uff08\u53ea\u80fd\u901a\u8fc7cmd\u6216\u8005shell\u767b\u5f55mysql\uff09 \u67e5\u770b\u9020\u6210\u6b7b\u9501\u7684sql\u8bed\u53e5\uff0c\u5206\u6790\u7d22\u5f15\u60c5\u51b5\uff0c\u7136\u540e\u4f18\u5316sql\u7136\u540eshow processlist; show status like \u2018%lock%\u2019 show OPEN TABLES where In_use > 0; \u8fd9\u4e2a\u8bed\u53e5\u8bb0\u5f55\u5f53\u524d\u9501\u8868\u72b6\u6001 \u53e6\u5916\u53ef\u4ee5\u6253\u5f00\u6162\u67e5\u8be2\u65e5\u5fd7\uff0clinux\u4e0b\u6253\u5f00\u9700\u5728my.cnf\u7684[mysqld]\u91cc\u9762\u52a0\u4e0a\u4ee5\u4e0b\u5185\u5bb9\uff1a slow_query_log=TRUE(\u6709\u4e9bmysql\u7248\u672c\u662fON) slow_query_log_file=/usr/local/mysql/slow_query_log.txt long_query_time=3 Windows\uff1a \u5728my.ini\u914d\u7f6e\u6587\u4ef6\u7684[mysqld]\u9009\u9879\u4e0b\u589e\u52a0\uff1a slow_query_log=TRUE slow_query_log_file=c:/slow_query_log.txt long_query_time=3 \u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\u8bb0\u5f97\u4e00\u5b9a\u8981\u91cd\u542fmysql\u670d\u52a1\u624d\u80fd\u751f\u6548\u8bb0\u5f55\u8f93\u51fa\u3002\u5fae\u7b11\u6700\u540e\u5728MySQL\u5ba2\u6237\u7aef\u4e2d\u8f93\u5165\u547d\u4ee4\uff1a show variables like '%quer%'; \u6838\u67e5\u4e00\u54c8\u662f\u5426Ok","title":"\u6162\u67e5\u8be2\u6392\u67e5"},{"location":"Dev/MySQL/%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%8E%92%E6%9F%A5/#_1","text":"select id , db , user , host , command , time , state , info FROM information_schema . processlist WHERE command != \"Sleep\" order by time desc ; /mysql/service/mysql-5.7.28/bin/mysql -u root -p 'root$123' -e 'select id, db, user, host, command, time, state, info FROM information_schema.processlist WHERE command!=\"Sleep\" order by time desc\\G' > /tmp/20200923-SlowQuery.txt select concat ( 'kill ' , id , ';' ) from information_schema . processlist where command != 'Sleep' and time > 10 * 60 and user = 'gzsz' order by time desc ; 1\u3001\u67e5\u8be2\u662f\u5426\u9501\u8868 show OPEN TABLES where In_use > 0; 2\u3001\u67e5\u8be2\u8fdb\u7a0b show processlist \u67e5\u8be2\u5230\u76f8\u5bf9\u5e94\u7684\u8fdb\u7a0b===\u7136\u540e kill id \u8865\u5145\uff1a \u67e5\u770b\u6b63\u5728\u9501\u7684\u4e8b\u52a1 SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS; \u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1 SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS; SELECT * from information_schema.INNODB_TRX kill trx_mysql_thread_id \u53ef\u76f4\u63a5\u5728mysql\u547d\u4ee4\u884c\u6267\u884c\uff1ashow engine innodb status\\G;\uff08\u53ea\u80fd\u901a\u8fc7cmd\u6216\u8005shell\u767b\u5f55mysql\uff09 \u67e5\u770b\u9020\u6210\u6b7b\u9501\u7684sql\u8bed\u53e5\uff0c\u5206\u6790\u7d22\u5f15\u60c5\u51b5\uff0c\u7136\u540e\u4f18\u5316sql\u7136\u540eshow processlist; show status like \u2018%lock%\u2019 show OPEN TABLES where In_use > 0; \u8fd9\u4e2a\u8bed\u53e5\u8bb0\u5f55\u5f53\u524d\u9501\u8868\u72b6\u6001 \u53e6\u5916\u53ef\u4ee5\u6253\u5f00\u6162\u67e5\u8be2\u65e5\u5fd7\uff0clinux\u4e0b\u6253\u5f00\u9700\u5728my.cnf\u7684[mysqld]\u91cc\u9762\u52a0\u4e0a\u4ee5\u4e0b\u5185\u5bb9\uff1a slow_query_log=TRUE(\u6709\u4e9bmysql\u7248\u672c\u662fON) slow_query_log_file=/usr/local/mysql/slow_query_log.txt long_query_time=3 Windows\uff1a \u5728my.ini\u914d\u7f6e\u6587\u4ef6\u7684[mysqld]\u9009\u9879\u4e0b\u589e\u52a0\uff1a slow_query_log=TRUE slow_query_log_file=c:/slow_query_log.txt long_query_time=3 \u6dfb\u52a0\u5b8c\u6210\u4e4b\u540e\u8bb0\u5f97\u4e00\u5b9a\u8981\u91cd\u542fmysql\u670d\u52a1\u624d\u80fd\u751f\u6548\u8bb0\u5f55\u8f93\u51fa\u3002\u5fae\u7b11\u6700\u540e\u5728MySQL\u5ba2\u6237\u7aef\u4e2d\u8f93\u5165\u547d\u4ee4\uff1a show variables like '%quer%'; \u6838\u67e5\u4e00\u54c8\u662f\u5426Ok","title":"\u6162\u67e5\u8be2\u6392\u67e5"},{"location":"Dev/MySQL/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%97%A5%E5%BF%97/","text":"GTID \u5728/mysql/data/\u76ee\u5f55\u4e0b\u9762\u5b58\u5728\u4e00\u4e2aauto.cnf\u6587\u4ef6 [auto] server-uuid = aff809d2-80bc-11e8-991b-005056a33cce \u6211\u4eec\u53ef\u4ee5\u5728\u540e\u9762\u5c06\u6dfb\u52a0ip\uff0c\u4fbf\u4e8e\u4e4b\u540e\u7684\u8bc6\u522b\uff0c\u5982172.18.100.57\uff0c\u5219\u4fee\u6539\u4e3a: [auto] server-uuid = aff809d2-80bc-11e8-991b-005056a33cce172-18-100-57 \u4f1a\u8bdd\u7ea7\u522b\u4e0d\u4ea7\u751f\u65e5\u5fd7 #\u6ce8\u610f\uff1a \u8fd9\u79cd\u6a21\u5f0f\u4e00\u822c\u4e0d\u5e38\u4f7f\u7528\uff0c\u9488\u5bf9\u5927\u8868\u64cd\u4f5c\uff0c\u4e0d\u60f3\u4ea7\u751f\u65e5\u5fd7\u7684\u60c5\u51b5\u4e0b\uff0c\u4e0d\u8fc7\u4f1a\u5bfc\u81f4\u4e0d\u540c\u6b65\uff0c\u9700\u8981\u5728\u540c\u6b65\u7684\u5e93\u4e5f\u6267\u884c\u540c\u6837\u7684\u64cd\u4f5c set sql_log_bin = 0; start transacation; update .... commit\uff1bset sql_log_bin = 1; \u4e8c\u8fdb\u5236\u65e5\u5fd7 \u89e3\u6790\u4e8c\u8fdb\u5236\u65e5\u5fd7\u9700\u8981\u57fa\u4e8e\u5b8c\u6574\u7684\u6570\u636e\u5b57\u5178 Mysql\u7684\u4e3aBinglog Oracle\u7684\u4e3aRedolog Postgresql\u7684\u4e3aWAL \u89e3\u6790Redo\u4e0eUndo Redo\u628abinlog\u7684\u65e5\u5fd7\u6570\u636e\u89e3\u6790\u5bf9\u6e90sql\u7684\u91cd\u590d\u6267\u884c\uff0c\u4e3b\u8981\u7528\u4e8e\u6570\u636e\u6062\u590d Undo\u628abinlog\u65e5\u5fd7\u89e3\u6790\u6210\u5bf9\u6e90sql\u7684\u53cd\u5411\u6267\u884c\uff0c\u5e94\u7528\u4e0e\u56de\u6eda\u64cd\u4f5c \u89e3\u6790\u5de5\u5177\uff1a \u4f7f\u7528binlog2log\u8fd9\u4e2a\u5f00\u6e90python\u5de5\u5177\u8fdb\u884c \u6ce8\u610f: \u4e00\u822c\u4f7f\u7528\u6ca1\u6709\u95ee\u9898\u80fd\u8fbe\u523099%\u7684\u89e3\u6790\u6b63\u786e\uff0c\u4f46\u662f\u6570\u636e\u5e93\u8fdb\u884c\u8fc1\u79fb\u4e4b\u540e\u4f1a\u5bfc\u81f4\u6570\u636e\u5b57\u5178\u53d8\u5316\uff0c\u6240\u4ee5\u8fd9\u65f6\u5019binlog2log\u4f1a\u6267\u884c\u62a5\u9519 binlog\u5199\u5165\u6a21\u5f0f \u76f4\u63a5\u5173\u7cfb\u5230\u6570\u636e\u540c\u6b65\u7684\u6548\u7387\uff0c\u4f18\u5316\u6570\u636e\u5199\u5165\uff0c\u53ef\u4ee5\u4f18\u5316\u6570\u636e\u540c\u6b65\u6548\u7387 \u666e\u901a\u5199\u5165(5.6\u4e4b\u524d) \u57fa\u4e8e\u7ec4\u63d0\u4ea4\u7684\u5199\u5165(\u5927\u69825.7\u4e4b\u540e)- Group Commit \u57fa\u4e8e\u5199\u96c6\u5408\u7684\u5199\u5165(\u5927\u69825.7.22\u540e)-WRSET \u4e0a\u9762\u7684\u4e24\u6761sql\uff0c\u540e\u4e00\u6761\u8bed\u53e5\u6267\u884c\u4f9d\u8d56\u4e8e\u524d\u9762\u8bed\u53e5\u5148\u6267\u884c\uff0c\u53cd\u4f8b:\u6bd4\u5982id=1\u548cid=2\u5c31\u6ca1\u6709\u4f9d\u8d56 \u7ec4\u63d0\u4ea4 \u539f\u7406: \u540c\u4e00\u65f6\u523b(\u7ef4\u5ea6\u662f\u5fae\u79d2)\u53ef\u80fd\u6709\u5f88\u591a\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5c31\u662f\u901a\u8fc7\u65e5\u5fd7\u5ef6\u8fdf\u63d0\u4ea4\u7684\u65b9\u5f0f\uff0c\u5c06\u8fd9\u4e9b\u4e8b\u52a1\u6210\u7ec4\u7684\u63d0\u4ea4\uff0c\u6279\u91cf\u5199\u5165binlog \u7f3a\u70b9\uff1a 1.\u7ec4\u63d0\u4ea4\u53ea\u80fd\u505a\u5230\u8868\u7ea7\u522b\uff0c\u64cd\u4f5c\u4e24\u4e2a\u4e0d\u540c\u8868\u7684\u65f6\u5019\u624d\u80fd\u5224\u65ad\u6ca1\u6709\u4f9d\u8d56\uff0c\u53ef\u4ee5\u6210\u4e3a\u4e00\u7ec4\u7684\uff0c\u4e0d\u80fd\u505a\u5230\u884c\u7684\u5224\u65ad\uff0c\u9897\u7c92\u5ea6\u5f88\u5927 \u6709\u4e00\u4e9b\u70ed\u8868\uff0c\u53ef\u80fd\u4e00\u76f4\u5728\u53d1\u751f\u6570\u636e\uff0c\u53ef\u80fd\u5c31\u6c38\u8fdc\u4e0d\u80fd\u8fdb\u884c\u7ec4\u63d0\u4ea4\uff0c\u6240\u4ee5\uff0c\u5c31\u6709\u540e\u9762\u7684\u5199\u96c6\u5408\u7684\u51fa\u73b0 2.\u6709\u5ef6\u8fdf\uff0c\u5bf9\u4e3b\u5e93\u751f\u4ea7\u4ea7\u751f\u5fae\u5c0f\u7684\u6027\u80fd\u5f71\u54cd 3.\u65e5\u5fd7\u98ce\u9669\uff0c\u4e0d\u7acb\u5373\u63d0\u4ea4\uff0c\u5b95\u673a\u4e4b\u540e\u53ef\u80fd\u5bfc\u81f4\u98ce\u5411\uff0c\u4f9d\u9760redo\u8fdb\u884c\u98ce\u9669\u4fdd\u969c \u53c2\u6570: # \u6700\u5927\u7b49\u5f85\u65f6\u95f4\uff0c\u5355\u4f4d\u5fae\u79d2\uff0c\u9ed8\u8ba40\uff0c\u8303\u56f4: 0~ 1000000(\u5373:1s) binlog_group_commit_sync_delay = 0 # \u5168\u5c40\u52a8\u6001\u53d8\u91cf\uff0c\u5355\u4f4d\u4e2a\u6570 binlog_group_commit_sync_no_delay_count \u7ec4\u63d0\u4ea4\u65e5\u5fd7\u67e5\u770b Cat binlog.log | grep last committed \u65e5\u5fd7\u5206\u6790\u65f6\u7684 sequence_number \u6240\u6709\u4e8b\u52a1\u53d1\u751f\u73b0\u540e\u987a\u5e8f\u6570\u503c\u3002 last_committed=\u5e8f\u5217\u53f7: \u65e7\u7ec4\u6700\u8fd1\u7684\u4e00\u4e2asequence_number\u503c\uff0c\u65e5\u5fd7\u5728\u5e94\u7528\u590d\u5236\u65f6\u9700\u8981\u6309\u987a\u5e8f\u6267\u884c \u5e8f\u5217\u53f7\u4e0d\u4e00\u6837\u8868\u793a\u4e0d\u80fd\u5728\u4e00\u4e2a\u7ec4\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u4e0d\u662f\u5728\u4e00\u4e2a\u65f6\u95f4\uff0c\u6216\u8005\u4e0d\u662f\u5728\u540c\u4e00\u4e2a\u8868 \u5e8f\u5217\u53f7\u4e00\u6837\u8868\u793a\u5728\u4e00\u4e2a\u7ec4(\u662f\u5426\u5728\u4e00\u7ec4\uff0c\u4f9d\u8d56\u4e8e\u4e3b\u5e93\u7684\u5e76\u53d1) \u610f\u4e49: \u51cf\u5c11\u5199\u65e5\u5fd7\u7684IO\u538b\u529b\uff1a \u7269\u7406IO\u4ee3\u4ef7\u5927\uff0c\u51cf\u5c11IO\u7684\u6b21\u6570\uff0cIO\u541e\u5410\u4e0b\u964d\uff0cCPU\u4e5f\u4e0b\u964d \u540c\u4e00\u7ec4\u4e8b\u52a1\u53ef\u4ee5\u5728\u5e94\u7528\u590d\u5236\u65f6\u5e76\u884c\u6267\u884c \u5199\u96c6\u5408 \u53c2\u6570(8.0\u4e4b\u540e) binlog_transaction_dependency_history_size \u540c\u4e00\u65f6\u523b\u5e93\u8868\u5217Hash\u503c\u662f\u4e00\u6837\u7684\u5c31\u662f\u5b58\u5728\u4f9d\u8d56\uff0c\u4e0d\u4e00\u6837\u5c31\u53ef\u4ee5\u653e\u5728\u4e00\u4e2a\u7ec4\u91cc\u9762 \u501f\u9274\u601d\u8def \u6765\u6e90: DBA\u63d0\u4f9bms\u811a\u672c\uff0c\u7528\u4e8e\u6570\u636e\u5e93\u8fd0\u7ef4\u7684\u57fa\u672c\u547d\u4ee4\u7684\u7efc\u5408\u8fd0\u884c\u811a\u672c \u5f00\u53d1: \u628atomcat\uff0credis\uff0cjdk\u7b49\u8fd0\u7ef4\u64cd\u4f5c\u90fd\u7528\u811a\u672c\u7684\u5f62\u5f0f\u8fdb\u884c\u7b80\u5316 \u4ea4\u6d41\u8bb0\u5f55 \u65e5\u5fd7\u591a\u5927\u548c\u6570\u636e\u591a\u5927\u6ca1\u6709\u5fc5\u7136\u5173\u7cfb\uff0c\u4e3b\u8981\u662f\u5728\u4e8e\u5e76\u53d1\uff0c\u5728\u4e8eDML\u7b49\u64cd\u4f5c\u7684\u9891\u7387 \u4fdd\u5b88\u7684binlog\u4fdd\u7559\u65f6\u95f4\u63a8\u8350: 7-10\u5929 \u8fdb\u884c\u65e5\u5fd7\u5ef6\u8fdf\uff0c\u4e3b\u5e93\u7684\u65e5\u5fd7\u4e00\u5929\u4e4b\u540e\u624d\u80fd\u5230\u8fbe\u4ece\u5e93\uff0c\u8fd9\u6837\u5c31\u662f\u89c4\u907f\u5220\u5e93\u8dd1\u8def\u7684\u64cd\u4f5c\u7b49\u6076\u610f\u5904\u7406 \u4e3b\u4ece\u90fd\u505c\u6389\u4e4b\u540e\uff0c\u5bf9\u6bd4\u6570\u636e\u662f\u5426\u540c\u6b65\u5c31\u662f\u5bf9\u91cd\u8981\u7684\u8868\u7684\u6570\u91cf\u6216\u8005\u4e1a\u52a1\u6570\u636e\u7684\u603b\u6570(\u5982\u4f59\u989dsum)\u8fdb\u884c\u5bf9\u6bd4 \u8bef\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7Undo\u65e5\u5fd7\u8fdb\u884c\u6062\u590d \u73b0\u5728\u4e0d\u662fgtid\uff0c\u5207\u6362\u5230gtid\u53ea\u9700\u8981\u5f00\u542fgtid\u6a21\u5f0f\u5c31\u53ef\u4ee5\uff0c\u5efa\u8bae\u65e7\u7684\u5c31\u4e0d\u8981\u5207\u6362\u5230GTID\u6a21\u5f0f gtid\u9650\u5236\uff1a\u53ea\u6709\u8fd9\u79cd\u8bed\u53e5\u6709\u9650\u5236create table2 as select * from table1; # \u89c4\u907f\u4ee5\u4e0a\u8bed\u53e5\u9650\u5236 create table like table2; insert into table select * from table2","title":"\u6570\u636e\u5e93\u65e5\u5fd7"},{"location":"Dev/PaaS/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/","text":"\u4f38\u7f29\u6a21\u5f0f \u00b6 \u5b9a\u65f6 \u52a8\u6001\uff1a\u6839\u636e\u6027\u80fd\u6307\u6807 \u56fa\u5b9a\u6570\u91cf\uff1a\u8bbe\u7f6e\u5065\u5eb7\u5b9e\u4f8b\u6570\uff0c\u5065\u5eb7\u7684\u670d\u52a1\u5668\u6570\u91cf\u5c0f\u4e8e\u8be5\u503c\u5219\u589e\u52a0\u5b9e\u4f8b \u81ea\u5b9a\u4e49\uff1a\u901a\u8fc7 API \u8c03\u7528\u60a8\u7684\u81ea\u6709\u76d1\u63a7\u7cfb\u7edf\uff0c\u6267\u884c\u624b\u5de5\u6536\u7f29 \u624b\u5de5\u6267\u884c\u4f38\u7f29\u89c4\u5219 \u624b\u5de5\u6dfb\u52a0\u6216\u79fb\u51fa\u65e2\u6709\u7684\u5b9e\u4f8b \u81ea\u5b9a\u4e49 MinSize\u3001MaxSize\uff0c\u5f39\u6027\u4f38\u7f29\u4f1a\u81ea\u52a8\u521b\u5efa\u6216\u91ca\u653e\u5b9e\u4f8b\uff0c\u5c06\u5f53\u524d\u5b9e\u4f8b\u6570\u7ef4\u6301\u5728 MinSize \u4e0e MaxSize \u4e4b\u95f4 \u5065\u5eb7\uff1a\u5982\u5b9e\u4f8b\u4e3a\u975e Running \u72b6\u6001\uff0c\u5f39\u6027\u4f38\u7f29\u5c06\u81ea\u52a8\u79fb\u51fa\u6216\u91ca\u653e\u4e0d\u5065\u5eb7\u7684\u5b9e\u4f8b \u591a\u6a21\u5f0f\u5e76\u884c \u9650\u5236 \u00b6 \u5e94\u7528\u5fc5\u987b\u662f\u65e0\u72b6\u6001\u3001\u53ef\u6a2a\u5411\u62d3\u5c55\u7684 \u52a8\u6001\u4f38\u7f29\u7684\u670d\u52a1\u5668\u9002\u5408\u7528\u4f5c\u5e94\u7528\u670d\u52a1\u5668\uff0c\u4e0d\u9002\u5408\u5b58\u50a8\u4f1a\u8bdd\u3001\u6570\u636e\u3001\u65e5\u5fd7\u7b49 \u65b9\u6848 \u00b6 k8s \u76f4\u63a5\u63a5\u5165\u65b0\u673a\u5668 \u7075\u611f \u00b6 \u817e\u8baf\u7684 k8s \u4f38\u7f29\u3002","title":"\u5f39\u6027\u4f38\u7f29"},{"location":"Dev/PaaS/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/#_1","text":"\u5b9a\u65f6 \u52a8\u6001\uff1a\u6839\u636e\u6027\u80fd\u6307\u6807 \u56fa\u5b9a\u6570\u91cf\uff1a\u8bbe\u7f6e\u5065\u5eb7\u5b9e\u4f8b\u6570\uff0c\u5065\u5eb7\u7684\u670d\u52a1\u5668\u6570\u91cf\u5c0f\u4e8e\u8be5\u503c\u5219\u589e\u52a0\u5b9e\u4f8b \u81ea\u5b9a\u4e49\uff1a\u901a\u8fc7 API \u8c03\u7528\u60a8\u7684\u81ea\u6709\u76d1\u63a7\u7cfb\u7edf\uff0c\u6267\u884c\u624b\u5de5\u6536\u7f29 \u624b\u5de5\u6267\u884c\u4f38\u7f29\u89c4\u5219 \u624b\u5de5\u6dfb\u52a0\u6216\u79fb\u51fa\u65e2\u6709\u7684\u5b9e\u4f8b \u81ea\u5b9a\u4e49 MinSize\u3001MaxSize\uff0c\u5f39\u6027\u4f38\u7f29\u4f1a\u81ea\u52a8\u521b\u5efa\u6216\u91ca\u653e\u5b9e\u4f8b\uff0c\u5c06\u5f53\u524d\u5b9e\u4f8b\u6570\u7ef4\u6301\u5728 MinSize \u4e0e MaxSize \u4e4b\u95f4 \u5065\u5eb7\uff1a\u5982\u5b9e\u4f8b\u4e3a\u975e Running \u72b6\u6001\uff0c\u5f39\u6027\u4f38\u7f29\u5c06\u81ea\u52a8\u79fb\u51fa\u6216\u91ca\u653e\u4e0d\u5065\u5eb7\u7684\u5b9e\u4f8b \u591a\u6a21\u5f0f\u5e76\u884c","title":"\u4f38\u7f29\u6a21\u5f0f"},{"location":"Dev/PaaS/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/#_2","text":"\u5e94\u7528\u5fc5\u987b\u662f\u65e0\u72b6\u6001\u3001\u53ef\u6a2a\u5411\u62d3\u5c55\u7684 \u52a8\u6001\u4f38\u7f29\u7684\u670d\u52a1\u5668\u9002\u5408\u7528\u4f5c\u5e94\u7528\u670d\u52a1\u5668\uff0c\u4e0d\u9002\u5408\u5b58\u50a8\u4f1a\u8bdd\u3001\u6570\u636e\u3001\u65e5\u5fd7\u7b49","title":"\u9650\u5236"},{"location":"Dev/PaaS/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/#_3","text":"k8s \u76f4\u63a5\u63a5\u5165\u65b0\u673a\u5668","title":"\u65b9\u6848"},{"location":"Dev/PaaS/%E5%BC%B9%E6%80%A7%E4%BC%B8%E7%BC%A9/#_4","text":"\u817e\u8baf\u7684 k8s \u4f38\u7f29\u3002","title":"\u7075\u611f"},{"location":"Software/Browser/Fuck%20chrome%20extension%20toolbar/","text":"fuck google, fuck chrome! add this to chrome's boot args: --disable-features=ExtensionsToolbarMenu result like this: \"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\" --disable-features=ExtensionsToolbarMenu","title":"Fuck chrome extension toolbar"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/","text":"\u4f7f\u7528 Typecho + PicGo \u8fdb\u884c\u56fe\u7247\u4e0a\u4f20 \u00b6 new public github repository \u00b6 new token \u00b6 PicGo settings \u00b6 set github and jsdelivr \u00b6 https://cdn.jsdelivr.net/gh/bolitao/PicRepository set picgo local server \u00b6 Typora settings \u00b6 All done!","title":"\u4f7f\u7528 Typecho + PicGo \u8fdb\u884c\u56fe\u7247\u4e0a\u4f20"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#typecho-picgo","text":"","title":"\u4f7f\u7528 Typecho + PicGo \u8fdb\u884c\u56fe\u7247\u4e0a\u4f20"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#new-public-github-repository","text":"","title":"new public github repository"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#new-token","text":"","title":"new token"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#picgo-settings","text":"","title":"PicGo settings"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#set-github-and-jsdelivr","text":"https://cdn.jsdelivr.net/gh/bolitao/PicRepository","title":"set github and jsdelivr"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#set-picgo-local-server","text":"","title":"set picgo local server"},{"location":"Software/Markdown/PicGo%20%2B%20GitHub%20%2B%20JSDeliver%20%2B%20Typora/#typora-settings","text":"All done!","title":"Typora settings"},{"location":"Software/OMV/install%20omv/","text":"mirrors \u00b6 sources.list : nano /etc/apt/sources.list content: deb http://mirrors.ustc.edu.cn/debian/ buster main deb-src http://mirrors.ustc.edu.cn/debian/ buster main deb https://mirrors.tuna.tsinghua.edu.cn/debian-security/ buster/updates main contrib non-free deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security/ buster/updates main contrib non-free # buster-updates, previously known as 'volatile' deb http://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb-src http://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free openmediavault.list : nano /etc/apt/sources.list.d/openmediavault.list content: deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul-proposed main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul partner omv extras \u00b6 install (may use a proxy): wget -O - https://github.com/OpenMediaVault-Plugin-Developers/packages/raw/master/install | bash ref: omv-extras.org mirrors: nano /etc/apt/sources.list.d/omvextras.list deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul buster main deb [ arch = amd64 ] https://download.docker.com/linux/debian buster stable deb http://linux.teamviewer.com/deb stable main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul-testing buster main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul-extras buster main docker proxy \u00b6 sudo mkdir -p /etc/systemd/system/docker.service.d sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf content: [Service] Environment=\"HTTP_PROXY=http://192.168.79.1:10809\" Environment=\"HTTPS_PROXY=http://192.168.79.1:10809\" Environment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp\" restart: sudo systemctl daemon-reload sudo systemctl show --property = Environment docker # check sudo systemctl restart docker ref: Control Docker with systemd | Docker Documentation VMware linux tools \u00b6 mkdir /mnt/cdrom mount /path/to/iso /mnt/cdrom apt install make gcc g++ cmake cp /mnt/cdrom/VMwareTools-10.3.22-15902021.tar.gz . # copy archive file to current path umount /mnt/cdrom tar -xzvf VMwareTools-10.3.22-15902021.tar.gz apt install make gcc g++ cmake ./vmware-install.pl ssh key login \u00b6 cp /mnt/hgfs/C/Users/username/.ssh/id_rsa.pub ~/.ssh # copy ssh pub from host cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys cat ~/.ssh/authorized_keys gnupg \u00b6 just copy, then set permission to 600 or 700 .","title":"Install omv"},{"location":"Software/OMV/install%20omv/#mirrors","text":"sources.list : nano /etc/apt/sources.list content: deb http://mirrors.ustc.edu.cn/debian/ buster main deb-src http://mirrors.ustc.edu.cn/debian/ buster main deb https://mirrors.tuna.tsinghua.edu.cn/debian-security/ buster/updates main contrib non-free deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security/ buster/updates main contrib non-free # buster-updates, previously known as 'volatile' deb http://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free deb-src http://mirrors.ustc.edu.cn/debian/ buster-updates main contrib non-free openmediavault.list : nano /etc/apt/sources.list.d/openmediavault.list content: deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul-proposed main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/public/ usul partner","title":"mirrors"},{"location":"Software/OMV/install%20omv/#omv-extras","text":"install (may use a proxy): wget -O - https://github.com/OpenMediaVault-Plugin-Developers/packages/raw/master/install | bash ref: omv-extras.org mirrors: nano /etc/apt/sources.list.d/omvextras.list deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul buster main deb [ arch = amd64 ] https://download.docker.com/linux/debian buster stable deb http://linux.teamviewer.com/deb stable main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul-testing buster main deb https://mirrors.bfsu.edu.cn/OpenMediaVault/openmediavault-plugin-developers/usul-extras buster main","title":"omv extras"},{"location":"Software/OMV/install%20omv/#docker-proxy","text":"sudo mkdir -p /etc/systemd/system/docker.service.d sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf content: [Service] Environment=\"HTTP_PROXY=http://192.168.79.1:10809\" Environment=\"HTTPS_PROXY=http://192.168.79.1:10809\" Environment=\"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp\" restart: sudo systemctl daemon-reload sudo systemctl show --property = Environment docker # check sudo systemctl restart docker ref: Control Docker with systemd | Docker Documentation","title":"docker proxy"},{"location":"Software/OMV/install%20omv/#vmware-linux-tools","text":"mkdir /mnt/cdrom mount /path/to/iso /mnt/cdrom apt install make gcc g++ cmake cp /mnt/cdrom/VMwareTools-10.3.22-15902021.tar.gz . # copy archive file to current path umount /mnt/cdrom tar -xzvf VMwareTools-10.3.22-15902021.tar.gz apt install make gcc g++ cmake ./vmware-install.pl","title":"VMware linux tools"},{"location":"Software/OMV/install%20omv/#ssh-key-login","text":"cp /mnt/hgfs/C/Users/username/.ssh/id_rsa.pub ~/.ssh # copy ssh pub from host cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys cat ~/.ssh/authorized_keys","title":"ssh key login"},{"location":"Software/OMV/install%20omv/#gnupg","text":"just copy, then set permission to 600 or 700 .","title":"gnupg"},{"location":"Software/VM/VMware%20Workstation%20%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA/","text":"\"C:\\Program Files (x86)\\VMware\\VMware Workstation\\vmrun.exe\" start \"G:\\VM\\OMV\\OMV.vmx\" nogui stop: \"C:\\Program Files (x86)\\VMware\\VMware Workstation\\vmrun.exe\" stop \"G:\\VM\\OMV\\OMV.vmx\" nogui go to gpedit.msc : \u7528\u6237\u914d\u7f6e - Windows \u8bbe\u7f6e - \u811a\u672c\uff08\u767b\u5f55/\u6ce8\u9500\uff09 \u5206\u522b\u6dfb\u52a0\u767b\u5f55\u811a\u672c\u548c\u6ce8\u9500\u811a\u672c\u3002","title":"VMware Workstation \u5f00\u673a\u542f\u52a8\u865a\u62df\u673a"}]}